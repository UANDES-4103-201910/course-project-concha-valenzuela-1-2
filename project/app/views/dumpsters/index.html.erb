<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div id="kconteiner">
  <div class = "dark_box dark_box2">
    <div class = "titles"> 
      <h1>Dumpster</h1>
    </div>

    <div class="search-container">
      <form class="example" action="http://localhost:3000/dumpsters">
        <input type="text" placeholder="Search.." name="search">
        
        <button type="submit"><i class="fa fa-search"></i></button>
      </form>
    </div>

    <div class= "table">
      <table class = "table">
        <thead>
          <tr>
            <th></th>
            <th>Title</th>
            <th>Author</th>
            <th>Description</th>
            <th>Status</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>

          </tr>
        </thead>

        <tbody>
       
          <% @dumpsters.each do |dumpster| %>
            <tr>
              <td><span class="glyphicon glyphicon-file"></span></td>
              <td><strong><%= Post.find(dumpster.post_id)[:title] %></strong></td>
              <td><strong><%= User.find(Post.find(dumpster.post_id)[:user_id])[:name] %></strong></td>
              <% d = "" %>
              <% contador = 0 %>
              <% for i in Post.find(dumpster.post_id)[:description].split('') %>
                <% d << i %>
                <% contador += 1 %>
                <% if contador == 20 %>
                  <% d += '...' %>
                  <% break %>
                <% end %>
              <% end %>

              <td><strong><%= d %></strong></td>
              <% if Post.find(dumpster.post_id).close == true %>
                <td><strong> Closed </strong></td>
              <% else %>
                <td><strong> Opened </strong></td>
              <% end %>
              <td><%= link_to post_path(Post.find(dumpster.post_id)) do %>
                    <span class="glyphicon glyphicon-eye-open"></span>
                  <% end %></td>
              <td><%= link_to edit_post_path(Post.find(dumpster.post_id)) do %>
                    <span class="glyphicon glyphicon-edit"></span>
                  <% end %></td>
              <td><%= link_to dumpster_path(dumpster),
                      method: :delete,
                      data: { confirm: 'Are you sure you want to mark this post as Appropriate?' } do %>
                    <span class="glyphicon glyphicon-check"></span>
                  <% end %></td>
              <td><%=link_to post_path(Post.find(dumpster.post_id)),
                      method: :delete,
                      data: { confirm: 'Are you sure you want to delete this post?' } do %>
                    <span class="glyphicon glyphicon-trash"></span>
                  <% end %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
